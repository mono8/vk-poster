(this["webpackJsonpvk-bot"]=this["webpackJsonpvk-bot"]||[]).push([[0],{32:function(e,t,n){e.exports={wrapper:"Group_wrapper__17gz7",link:"Group_link__Lsc18",groupName:"Group_groupName__4g0ea",image:"Group_image__2fvKh"}},38:function(e,t,n){e.exports={photoInput:"SendingForm_photoInput__2QH4b",form:"SendingForm_form__1Jg2e"}},39:function(e,t,n){e.exports={container:"Token_container__3nGR6",label:"Token_label__1_3FU"}},47:function(e,t,n){e.exports={wrapper:"Groups_wrapper__1oPfr"}},54:function(e,t,n){e.exports=n(70)},59:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(7),c=n.n(o),u=(n(59),n(105)),s=n(8),i=n(29),l=n(99),p=n(104),f=n(102),g=n(107),m=n(32),b=n.n(m),d=function(){return{type:"[groups] Uncheck all groups"}},h=n(14),O=n(3),v=Object(l.a)((function(e){return{isChecked:{backgroundColor:"#b3e5fc"},success:{backgroundColor:"#b2ff59"},error:{backgroundColor:"#ff6e40"}}})),k=Object(h.b)((function(e){return{successful:e.status.success,rejected:e.status.error}}),{toggleGroup:function(e){return{type:"[groups] Toggle group",payload:{id:e}}}})((function(e){var t=e.group,n=e.toggleGroup,r=e.successful,o=e.rejected,c=function(){n(t.id)},u=v();return a.a.createElement(f.a,{className:Object(O.a)(b.a.wrapper,t.checked&&u.isChecked,r.includes(t.id)&&u.success,o.includes(t.id)&&u.error)},a.a.createElement(g.a,{checked:t.checked,onChange:c,color:"primary",inputProps:{"aria-label":"secondary checkbox"}}),a.a.createElement("span",{className:b.a.groupName,onClick:c},t.name),a.a.createElement("a",{href:"https://vk.com/"+t.screen_name,className:b.a.link,target:"_blank"},a.a.createElement("img",{className:b.a.image,src:t.photo_50})))})),y=n(47),j=n.n(y),w=n(25),E=n.n(w);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var P=Object(l.a)((function(e){return{root:{margin:"16px 16px 16px 0"}}})),S=Object(h.b)((function(e){var t=Boolean(e.status.success.length||e.status.error.length);return{groups:e.groups,token:e.user.token,showReset:t}}),{checkAllGroups:function(){return{type:"[groups] Check all groups"}},uncheckAllGroups:d,setGroups:function(e){return{type:"[groups] Set groups",payload:{groups:e}}},resetStatuses:function(){return{type:"[status] Reset all"}}})((function(e){var t=e.groups,n=e.checkAllGroups,o=e.uncheckAllGroups,c=e.setGroups,u=e.token,l=e.resetStatuses,f=e.showReset,g=Object(r.useState)(!0),m=Object(i.a)(g,2),b=m[0],d=m[1],h=P();return Object(r.useEffect)((function(){u&&E()("https://api.vk.com/method/groups.get?fields=can_post&count&extended=1&access_token=".concat(u,"&v=").concat(5.103),void 0,(function(e,t){e?console.log(e):c(t.response.items.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{checked:!1})})))}))}),[u]),t.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(p.a,{variant:"contained",onClick:function(){b?n():o(),d(!b)},className:h.root},"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c/\u0443\u0431\u0440\u0430\u0442\u044c \u0432\u0441\u0435 \u0433\u0430\u043b\u043a\u0438"),f&&a.a.createElement(p.a,{variant:"contained",onClick:l,className:Object(O.a)(h.root)},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438"),a.a.createElement("div",{className:j.a.wrapper},t.map((function(e){return a.a.createElement(k,{key:e.id,group:e})})))):null})),C=n(37),D=n.n(C),N=n(48),x=n(106),G=n(38),I=n.n(G),T=Object(l.a)((function(e){return{textField:{width:400}}})),R=function(e){var t=e.message,n=e.onChange,r=T();return a.a.createElement(x.a,{label:"\u0428\u0430\u043f\u043a\u0430",multiline:!0,rows:10,rowsMax:40,className:r.textField,margin:"normal",variant:"outlined",value:t,onChange:n})},A=Object(h.b)((function(e){return{token:e.user.token,groups:e.groups}}),{requestSuccess:function(e){return{type:"[status] Success",payload:{id:e}}},requestError:function(e){return{type:"[status] Error",payload:{id:e}}},uncheckAllGroups:d})((function(e){var t=e.token,n=e.groups,o=e.requestSuccess,c=e.requestError,u=(e.uncheckAllGroups,Object(r.useState)(!1)),s=Object(i.a)(u,2),l=s[0],f=s[1],g=Object(r.useState)(localStorage.getItem("message")||""),m=Object(i.a)(g,2),b=m[0],d=m[1],h=Object(r.useState)(localStorage.getItem("photo")||""),O=Object(i.a)(h,2),v=O[0],k=O[1];Object(r.useEffect)((function(){return localStorage.setItem("message",b),function(){}}),[b]),Object(r.useEffect)((function(){return localStorage.setItem("photo",v),function(){}}),[v]);var y=function(){var e=Object(N.a)(D.a.mark((function e(t){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=2,!b){e.next=7;break}return f(!0),e.next=6,Promise.all(n.filter((function(e){return e.checked})).map((function(e){return r+=2,new Promise((function(t,n){setTimeout((function(){j(e,t,n)}),500*r)})).then((function(e){return{v:e,status:"fulfilled"}}),(function(e){return{e:e,status:"rejected"}}))})));case 6:f(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e,n,r){E()("https://api.vk.com/method/wall.post?owner_id=-".concat(e.id,"&message=").concat(b,"&attachments=").concat(v,"&access_token=").concat(t,"&v=").concat(5.103),void 0,(function(t,a){t?(console.log("group ".concat(e.id," ")+t.message),c(e.id),r()):(o(e.id),n())}))};return a.a.createElement("form",{className:I.a.form},a.a.createElement(R,{message:b,onChange:function(e){d(e.target.value)}}),a.a.createElement("div",{className:I.a.photoInput},a.a.createElement(x.a,{fullWidth:!0,label:"\u0424\u043e\u0442\u043e",variant:"outlined",value:v,onChange:function(e){k(e.target.value)}})),a.a.createElement(p.a,{variant:"contained",disabled:l,onClick:y,type:"submit"},l?"\u0418\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430...":"\u0420\u0430\u0437\u043e\u0441\u043b\u0430\u0442\u044c"))})),F=n(39),U=n.n(F),q=Object(h.b)((function(e){return{token:e.user.token}}),{changeToken:function(e){return{type:"[user] Change token",payload:{token:e}}}})((function(e){var t=e.changeToken,n=e.token;return a.a.createElement("div",{className:U.a.container},a.a.createElement("a",{href:"https://oauth.vk.com/authorize?client_id=7218002&redirect_uri=https://oauth.vk.com/blank.html&display=popup&scope=wall,offline,groups&response_type=token&v=".concat(5.103),className:U.a.label},"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u043e\u043a\u0435\u043d"),a.a.createElement(x.a,{id:"input-token",label:"\u0422\u043e\u043a\u0435\u043d",variant:"outlined",onChange:function(e){if(e.target.value)try{var n=new URL(e.target.value.replace("#","?")).searchParams.get("access_token");n&&t(n)}catch(r){console.log(r)}},value:n}))})),L=Object(h.b)((function(e){return{token:e.user.token,name:e.user.name,surname:e.user.surname}}),{changeSurname:function(e){return{type:"[user] Change surname",payload:{surname:e}}},changeName:function(e){return{type:"[user] Change name",payload:{name:e}}}})((function(e){var t=e.token,n=e.changeSurname,o=e.changeName,c=e.name,u=e.surname;return Object(r.useEffect)((function(){return t&&E()("https://api.vk.com/method/account.getProfileInfo?&access_token=".concat(t,"&v=").concat(5.103),void 0,(function(e,t){e?console.log(e):(o(t.response.first_name),n(t.response.last_name))})),function(){}}),[t]),c&&u&&t?a.a.createElement("div",null,a.a.createElement("h1",null,"\u0410\u043a\u043a\u0430\u0443\u043d\u0442"),a.a.createElement("div",null,"".concat(c," ").concat(u))):a.a.createElement(q,null)})),W=function(){return a.a.createElement(u.a,{maxWidth:"xl"},a.a.createElement(L,null),a.a.createElement(S,null),a.a.createElement(A,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=n(24);function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=n(16);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=Object(X.b)({groups:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[groups] Set groups":return t.payload.groups;case"[groups] Toggle group":return e.map((function(e){return e.id===t.payload.id?J({},e,{checked:!e.checked}):e}));case"[groups] Check all groups":return e.map((function(e){return J({},e,{checked:!0})}));case"[groups] Uncheck all groups":return e.map((function(e){return J({},e,{checked:!1})}));default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",surname:"",token:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[user] Change name":return V({},e,{name:t.payload.name});case"[user] Change surname":return V({},e,{surname:t.payload.surname});case"[user] Change token":return V({},e,{token:t.payload.token});default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{success:[],error:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[status] Success":return M({},e,{success:[].concat(Object(H.a)(e.success),[t.payload.id])});case"[status] Error":return M({},e,{error:[].concat(Object(H.a)(e.error),[t.payload.id])});case"[status] Reset all":return{success:[],error:[]};default:return e}}}),$=Object(X.c)(Q,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(a.a.createElement(h.a,{store:$},a.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[54,1,2]]]);
//# sourceMappingURL=main.75c4cc89.chunk.js.map